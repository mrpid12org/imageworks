# GUI Control Center Reference

The Streamlit-based Control Center unifies operational workflows for mono
checking, similarity analysis, personal tagging, and color narration.

## Application entry point
- `imageworks-gui` launches `imageworks.gui.app.main`, which configures the page,
  initialises session state, and renders shared sidebar widgets (GPU info, quick
  actions, help).【F:pyproject.toml†L36-L54】【F:src/imageworks/gui/app.py†L1-L110】
- `ensure_directories` prepares the standard `outputs/` structure so downstream
  tools share locations for results, summaries, caches, and metrics.【F:src/imageworks/gui/config.py†L1-L78】
- `init_session_state` seeds workflow defaults, user preferences, and cached
  registry data for all pages.【F:src/imageworks/gui/state.py†L1-L83】

## Configuration helpers
- `config.py` centralises shared paths (registry files, output directories, and
  tool-specific defaults) to keep GUI and CLI workflows aligned.【F:src/imageworks/gui/config.py†L1-L78】
- Session helpers `get_app_setting` / `set_app_setting` store per-workflow
  overrides across Streamlit reruns.【F:src/imageworks/gui/config.py†L79-L140】
- Backend defaults surface the chat proxy and Ollama endpoints the GUI polls for
  health and completions.【F:src/imageworks/gui/config.py†L41-L70】

## Page modules
Each Streamlit page lives under `imageworks.gui.pages` with matching components:
- `models` – lists registry entries, deployment profiles, and vLLM orchestration
  status by calling the loader APIs.【F:src/imageworks/gui/pages/models.py†L1-L240】
- `mono`, `similarity`, `personal_tagger`, `color_narrator` – wrap the respective
  CLIs, generate command previews, and queue jobs via `subprocess.Popen`.【F:src/imageworks/gui/pages/mono.py†L1-L220】【F:src/imageworks/gui/utils/jobs.py†L15-L140】
- `results` – streams JSONL output, provides filters, and links to generated
  overlays or summaries.【F:src/imageworks/gui/pages/results.py†L1-L210】

## Components & utilities
- `components/help_docs.py` renders sidebar and modal help content shared across
  pages.【F:src/imageworks/gui/components/help_docs.py†L1-L180】
- `utils/jobs.py` encapsulates asynchronous job execution, capturing stdout/stderr
  into the `outputs/logs` directory for later review.【F:src/imageworks/gui/utils/jobs.py†L15-L140】
- `utils/registry.py` caches loader responses to avoid repeated disk reads when
  switching tabs.【F:src/imageworks/gui/utils/registry.py†L1-L160】

## Integration points
- CLI parity: GUI invokes the same scripts as documented runbooks, surfacing
  command-line equivalents for reproducibility.【F:src/imageworks/gui/pages/mono.py†L150-L210】
- Metrics: pages read BatchRunMetrics JSON generated by the CLIs to populate charts
  and status indicators.【F:src/imageworks/gui/pages/results.py†L120-L180】
- Chat proxy health: GPU and backend panels reuse loader and proxy clients to show
  connection status before launching workflows.【F:src/imageworks/gui/app.py†L40-L110】
